<!DOCTYPE html>

<head>
  <!-- Insert this line above script imports  -->
  <script>
    if (typeof module === "object") {
      window.module = module;
      module = undefined;
    }
  </script>
  <!-- Bootstrap CSS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
    crossorigin="anonymous"
  ></script>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
    crossorigin="anonymous"
  />

  <link rel="stylesheet" type="text/css" href="../styles/common.css" />

  <link
    rel="stylesheet"
    type="text/css"
    href="../styles/quickCollectStyles.css"
  />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
  <script src="../javascript/features.js"></script>
  <script src="../javascript/toast.js"></script>
  <script type="text/javascript">
    const { ipcRenderer } = require("electron");
    const ipc = require("electron").ipcRenderer;

    ipc.on("message", (event, message) => {
      if (message.text) setPromptText(message.text);
      if (message.progress)
        setProgressBar(message.progress.progress, message.progress.text);
      if (message.image) setPromptImage(message.image);
    });

    function setProgressBar(percent, text) {
      $("#action-progress").html(`${text}`);
      $("#action-progress").css("width", `${percent}%`);
    }
    function setPromptImage(imagePath) {
      $("#prompt-image").attr("src", `../images/actions/${imagePath}`);
    }
    function setPromptText(text) {
      $("#prompt-text").html(text);
    }
  </script>
</head>

<body>
  <div
    style="
      display: flex;
      flex: 1;
      justify-content: center;
      flex-direction: column;
    "
  >
    <img
      src="../images/actions/key_grip.jpg"
      id="prompt-image"
      style="max-height: 75vh"
    />
    <div
      style="
        padding: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
      "
    >
      <div id="prompt-text">Recording...</div>
      <div class="progress" style="width: 100%">
        <div
          class="progress-bar"
          role="progressbar"
          style="width: 50%"
          aria-valuenow="50"
          aria-valuemin="0"
          aria-valuemax="100"
          id="action-progress"
        >
          50%
        </div>
      </div>
      <div>Testing</div>
    </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
    crossorigin="anonymous"
  ></script>
</body>
